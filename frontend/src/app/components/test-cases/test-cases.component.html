<div class="project-testcases">
    <h3 class="title">Test Cases</h3>
    <div class="title-container">
        <div class="global-filter-container">
            <input pInputText type="text" (input)="dt.filterGlobal($any($event.target).value, 'contains')" placeholder="Search" />
        </div> 
        <button class="add-test-case" title="Add test case" *ngIf="!permission.isViewer(projectId)">
            <i class="pi pi-plus" (click)="addTestCase()"></i>
        </button>
    </div>

    <p-table #dt [value]="testcases" class="testcases-table"
            [responsiveLayout]="'scroll'" [scrollable]="true" [scrollHeight]="'80%'"
            [globalFilterFields]="['test_case_id', 'description', 'status']">           

        <ng-template pTemplate="header">
            <tr>
                <th pSortableColumn="test_case_id">
                    <div>
                        <div>ID</div>
                        <p-sortIcon field="test_case_id"></p-sortIcon>
                    </div>
                </th>
                <th pSortableColumn="description">
                    <div>
                        <div>Description</div>
                        <p-sortIcon field="description"></p-sortIcon>
                    </div>
                </th>
                <th pSortableColumn="status">
                    <div>
                        <div>Status</div>
                        <p-sortIcon field="status"></p-sortIcon>
                    </div>
                </th>
            </tr>
        </ng-template>

        <ng-template pTemplate="body" let-testcase>
            <tr>
                <td class="test-case-id" (click)="viewTestCase(testcase.id)">
                    {{ testcase.test_case_id }}
                </td>
                <td>{{ testcase.description }}</td>
                <td>
                    <span class="status" [ngClass]="testcase.status">
                        <span class="dot"></span>
                        {{ formatStatus(testcase.status) }}
                    </span>
                </td>
            </tr>
        </ng-template>

    </p-table>
</div>
